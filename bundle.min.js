(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){module.exports={"default":require("core-js/library/fn/object/create"),__esModule:true}},{"core-js/library/fn/object/create":10}],2:[function(require,module,exports){module.exports={"default":require("core-js/library/fn/object/define-property"),__esModule:true}},{"core-js/library/fn/object/define-property":11}],3:[function(require,module,exports){module.exports={"default":require("core-js/library/fn/object/get-own-property-descriptor"),__esModule:true}},{"core-js/library/fn/object/get-own-property-descriptor":12}],4:[function(require,module,exports){module.exports={"default":require("core-js/library/fn/object/set-prototype-of"),__esModule:true}},{"core-js/library/fn/object/set-prototype-of":13}],5:[function(require,module,exports){"use strict";exports["default"]=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};exports.__esModule=true},{}],6:[function(require,module,exports){"use strict";var _Object$defineProperty=require("babel-runtime/core-js/object/define-property")["default"];exports["default"]=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;_Object$defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();exports.__esModule=true},{"babel-runtime/core-js/object/define-property":2}],7:[function(require,module,exports){"use strict";var _Object$getOwnPropertyDescriptor=require("babel-runtime/core-js/object/get-own-property-descriptor")["default"];exports["default"]=function get(_x,_x2,_x3){var _again=true;_function:while(_again){var object=_x,property=_x2,receiver=_x3;desc=parent=getter=undefined;_again=false;if(object===null)object=Function.prototype;var desc=_Object$getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{_x=parent;_x2=property;_x3=receiver;_again=true;continue _function}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}}};exports.__esModule=true},{"babel-runtime/core-js/object/get-own-property-descriptor":3}],8:[function(require,module,exports){"use strict";var _Object$create=require("babel-runtime/core-js/object/create")["default"];var _Object$setPrototypeOf=require("babel-runtime/core-js/object/set-prototype-of")["default"];exports["default"]=function(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=_Object$create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)_Object$setPrototypeOf?_Object$setPrototypeOf(subClass,superClass):subClass.__proto__=superClass};exports.__esModule=true},{"babel-runtime/core-js/object/create":1,"babel-runtime/core-js/object/set-prototype-of":4}],9:[function(require,module,exports){"use strict";exports["default"]=function(obj){return obj&&obj.__esModule?obj:{"default":obj}};exports.__esModule=true},{}],10:[function(require,module,exports){var $=require("../../modules/$");module.exports=function create(P,D){return $.create(P,D)}},{"../../modules/$":25}],11:[function(require,module,exports){var $=require("../../modules/$");module.exports=function defineProperty(it,key,desc){return $.setDesc(it,key,desc)}},{"../../modules/$":25}],12:[function(require,module,exports){var $=require("../../modules/$");require("../../modules/es6.object.get-own-property-descriptor");module.exports=function getOwnPropertyDescriptor(it,key){return $.getDesc(it,key)}},{"../../modules/$":25,"../../modules/es6.object.get-own-property-descriptor":29}],13:[function(require,module,exports){require("../../modules/es6.object.set-prototype-of");module.exports=require("../../modules/$.core").Object.setPrototypeOf},{"../../modules/$.core":17,"../../modules/es6.object.set-prototype-of":30}],14:[function(require,module,exports){module.exports=function(it){if(typeof it!="function")throw TypeError(it+" is not a function!");return it}},{}],15:[function(require,module,exports){var isObject=require("./$.is-object");module.exports=function(it){if(!isObject(it))throw TypeError(it+" is not an object!");return it}},{"./$.is-object":24}],16:[function(require,module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},{}],17:[function(require,module,exports){var core=module.exports={version:"1.2.1"};if(typeof __e=="number")__e=core},{}],18:[function(require,module,exports){var aFunction=require("./$.a-function");module.exports=function(fn,that,length){aFunction(fn);if(that===undefined)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},{"./$.a-function":14}],19:[function(require,module,exports){var global=require("./$.global"),core=require("./$.core"),PROTOTYPE="prototype";var ctx=function(fn,that){return function(){return fn.apply(that,arguments)}};var $def=function(type,name,source){var key,own,out,exp,isGlobal=type&$def.G,isProto=type&$def.P,target=isGlobal?global:type&$def.S?global[name]:(global[name]||{})[PROTOTYPE],exports=isGlobal?core:core[name]||(core[name]={});if(isGlobal)source=name;for(key in source){own=!(type&$def.F)&&target&&key in target;if(own&&key in exports)continue;out=own?target[key]:source[key];if(isGlobal&&typeof target[key]!="function")exp=source[key];else if(type&$def.B&&own)exp=ctx(out,global);else if(type&$def.W&&target[key]==out)!function(C){exp=function(param){return this instanceof C?new C(param):C(param)};exp[PROTOTYPE]=C[PROTOTYPE]}(out);else exp=isProto&&typeof out=="function"?ctx(Function.call,out):out;exports[key]=exp;if(isProto)(exports[PROTOTYPE]||(exports[PROTOTYPE]={}))[key]=out}};$def.F=1;$def.G=2;$def.S=4;$def.P=8;$def.B=16;$def.W=32;module.exports=$def},{"./$.core":17,"./$.global":22}],20:[function(require,module,exports){module.exports=function(it){if(it==undefined)throw TypeError("Can't call method on  "+it);return it}},{}],21:[function(require,module,exports){module.exports=function(exec){try{return!!exec()}catch(e){return true}}},{}],22:[function(require,module,exports){var UNDEFINED="undefined";var global=module.exports=typeof window!=UNDEFINED&&window.Math==Math?window:typeof self!=UNDEFINED&&self.Math==Math?self:Function("return this")();if(typeof __g=="number")__g=global},{}],23:[function(require,module,exports){var cof=require("./$.cof");module.exports=0 in Object("z")?Object:function(it){return cof(it)=="String"?it.split(""):Object(it)}},{"./$.cof":16}],24:[function(require,module,exports){module.exports=function(it){return typeof it==="object"?it!==null:typeof it==="function"}},{}],25:[function(require,module,exports){var $Object=Object;module.exports={create:$Object.create,getProto:$Object.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:$Object.getOwnPropertyDescriptor,setDesc:$Object.defineProperty,setDescs:$Object.defineProperties,getKeys:$Object.keys,getNames:$Object.getOwnPropertyNames,getSymbols:$Object.getOwnPropertySymbols,each:[].forEach}},{}],26:[function(require,module,exports){module.exports=function(KEY,exec){var $def=require("./$.def"),fn=(require("./$.core").Object||{})[KEY]||Object[KEY],exp={};exp[KEY]=exec(fn);$def($def.S+$def.F*require("./$.fails")(function(){fn(1)}),"Object",exp)}},{"./$.core":17,"./$.def":19,"./$.fails":21}],27:[function(require,module,exports){var getDesc=require("./$").getDesc,isObject=require("./$.is-object"),anObject=require("./$.an-object");var check=function(O,proto){anObject(O);if(!isObject(proto)&&proto!==null)throw TypeError(proto+": can't set as prototype!")};module.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(test,buggy,set){try{set=require("./$.ctx")(Function.call,getDesc(Object.prototype,"__proto__").set,2);set(test,[]);buggy=!(test instanceof Array)}catch(e){buggy=true}return function setPrototypeOf(O,proto){check(O,proto);if(buggy)O.__proto__=proto;else set(O,proto);return O}}({},false):undefined),check:check}},{"./$":25,"./$.an-object":15,"./$.ctx":18,"./$.is-object":24}],28:[function(require,module,exports){var IObject=require("./$.iobject"),defined=require("./$.defined");module.exports=function(it){return IObject(defined(it))}},{"./$.defined":20,"./$.iobject":23}],29:[function(require,module,exports){var toIObject=require("./$.to-iobject");require("./$.object-sap")("getOwnPropertyDescriptor",function($getOwnPropertyDescriptor){return function getOwnPropertyDescriptor(it,key){return $getOwnPropertyDescriptor(toIObject(it),key)}})},{"./$.object-sap":26,"./$.to-iobject":28}],30:[function(require,module,exports){var $def=require("./$.def");$def($def.S,"Object",{setPrototypeOf:require("./$.set-proto").set})},{"./$.def":19,"./$.set-proto":27}],31:[function(require,module,exports){"use strict";var _createClass=require("babel-runtime/helpers/create-class")["default"];var _classCallCheck=require("babel-runtime/helpers/class-call-check")["default"];var _interopRequireDefault=require("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(exports,"__esModule",{value:true});var _UtilityJs=require("./Utility.js");var _UtilityJs2=_interopRequireDefault(_UtilityJs);var EventManager=function(){function EventManager(events){_classCallCheck(this,EventManager);this.events=events}_createClass(EventManager,[{key:"getEvents",value:function getEvents(){return this.events}},{key:"addEventListener",value:function addEventListener(evtName,listener,ctx){if(this.events.indexOf(evtName)===-1){throw new Error('The object does not support the event "'+evtName+'".')}this.listeners=this.listeners||{};this.listeners[evtName]=this.listeners[evtName]||[];var fn=ctx?(0,_UtilityJs2["default"])(listener,ctx):listener;fn.fn=listener;this.listeners[evtName].push(fn)}},{key:"removeEventListener",value:function removeEventListener(evtName,listener){if(!this.listeners[evtName]){throw new Error("Event '"+evtName+"' is not registered.")}var i=0,list=this.listeners[evtName],l=list.length,idx=-1;for(;i<l;i++){if(list[i].fn===listener){idx=i;break}}if(i!==-1){this.listeners[evtName].splice(i,1)}}},{key:"trigger",value:function trigger(evtName,e){if(this.listeners[evtName]){var list=this.listeners[evtName],i,l;for(i=0,l=list.length;i<l;i++){list[i](e)}}}},{key:"on",value:function on(evt,fn,ctx){return this.addEventListener(evt,fn,ctx)}},{key:"off",value:function off(evtName,listener){return this.removeEventListener(evtName,listener)}}]);return EventManager}();exports.EventManager=EventManager},{"./Utility.js":33,"babel-runtime/helpers/class-call-check":5,"babel-runtime/helpers/create-class":6,"babel-runtime/helpers/interop-require-default":9}],32:[function(require,module,exports){"use strict";var _get=require("babel-runtime/helpers/get")["default"];var _inherits=require("babel-runtime/helpers/inherits")["default"];var _createClass=require("babel-runtime/helpers/create-class")["default"];var _classCallCheck=require("babel-runtime/helpers/class-call-check")["default"];var _interopRequireDefault=require("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(exports,"__esModule",{value:true});var _EventManagerJs=require("./EventManager.js");var _EventManagerJs2=_interopRequireDefault(_EventManagerJs);var Timer=function(_EventManager){_inherits(Timer,_EventManager);function Timer(timeSpan,max){_classCallCheck(this,Timer);_get(Object.getPrototypeOf(Timer.prototype),"constructor",this).call(this,["resumed","paused","tick","stopped","started"]);this._timeSpan=timeSpan||200;this._max=max||0;this._step=0;this._players=[]}_createClass(Timer,[{key:"addPlayer",value:function addPlayer(player){if(player.update&&typeof player.update==="function"){this._players.push(player);return true}return false}},{key:"setTimeSpan",value:function setTimeSpan(timespan){this._timeSpan=timespan}},{key:"_update",value:function _update(step){if(this._players.length>0){for(var i=0,l=this._players.length;i<l;i++){this._players[i].update(step)}}}},{key:"removePlayer",value:function removePlayer(player){var idx=this._players.indexOf(player);if(idx!==-1){this._players.splice(idx,1);return true}return false}},{key:"start",value:function start(){this._step=0;this._max=max||this._max;this.resume(true);this.trigger("started",{})}},{key:"pause",value:function pause(){if(this._timer===-1){return false}clearInterval(this._timer);this._timer=-1;if(!force){this.trigger("paused",{step:this._step})}}},{key:"setMax",value:function setMax(max){this._max=max}},{key:"resume",value:function resume(force){if(this._timer!==-1){this.stop();clearInterval(this._timer)}if(!force){this.trigger("resumed",{step:this._step})}this._timer=setInterval(proxy(this.tick,this),this._timeSpan)}},{key:"stop",value:function stop(){this.pause(true);this._step=0;this.trigger("stopped",{});this._update(0)}},{key:"next",value:function next(){this.pause();if(this._step<this._max-1){this._step++;this.trigger("change",{step:this._step});this._update(this._step)}}},{key:"prev",value:function prev(){this.pause();if(this._step>0){this._step--;this._update(this._step);this.trigger("change",{step:this._step})}}},{key:"setStep",value:function setStep(step){this._step=step;this.pause();this._step=step<0?this._max+step:step>=this._max?this._max-step:step;this._update(this._step)}},{key:"getStep",value:function getStep(){return this._step}},{key:"tick",value:function tick(){this._step++;if(this._step>=this._max){clearInterval(this._timer);this._timer=-1;this._step=0;return false}this._update(this._step);this.trigger("tick",{index:this._step})}}]);return Timer}(_EventManagerJs2["default"]);exports.Timer=Timer},{"./EventManager.js":31,"babel-runtime/helpers/class-call-check":5,"babel-runtime/helpers/create-class":6,"babel-runtime/helpers/get":7,"babel-runtime/helpers/inherits":8,"babel-runtime/helpers/interop-require-default":9}],33:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.proxy=proxy;function proxy(){var c=ctx||this,args=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments,0);fn.apply(ctx,args.concat(a))}}},{}]},{},[32]);
